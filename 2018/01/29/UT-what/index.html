<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>单元测试整理（一）——单元测试是什么，有什么好处 | Page of Wentao Li</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">单元测试整理（一）——单元测试是什么，有什么好处</h1><a id="logo" href="/.">Page of Wentao Li</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">单元测试整理（一）——单元测试是什么，有什么好处</h1><div class="post-meta">Jan 29, 2018</div><div class="post-content"><h2 id="单元测试是什么"><a href="#单元测试是什么" class="headerlink" title="单元测试是什么"></a>单元测试是什么</h2><p><strong>单元测试</strong>是开发者编写的一小段代码，用于检验被测代码的一个很小的、很明确的功能是否正确，通常而言，一个单元测试是用于判断某个特定条件（或者场景）下某个特定函数的行为。</p>
<h2 id="单元测试的好处"><a href="#单元测试的好处" class="headerlink" title="单元测试的好处"></a>单元测试的好处</h2><p>1，单元测试不但会使你的工作完成得更轻松，而且会令你的设计变得更好，大大减少你花在调试上面的时间<br>2，提高代码质量<br>3，减少bug，快速定位bug<br>4，放心地修改、重构<br>5，显得专业（玩笑话）</p>
<h2 id="写单元测试要注意什么"><a href="#写单元测试要注意什么" class="headerlink" title="写单元测试要注意什么"></a>写单元测试要注意什么</h2><p>1，不能只测试一条正确执行路径，要考虑到所有可能的情况<br>2，要确保所有测试都能够通过，避免间接损害<br>3，如果一个函数复杂到无法单测，那就说明模块的抽象有问题<br>4，配置不是单元测试的难点，难点是mock（后文讲），做单元测试需要伪造被测函数用到的大部分函数</p>
<p>间接损害：在整个系统中，当某一部分加入了新特性，或者修复了一个bug之后，给系统的其他（与前面可能是互不相关的）部分引入了一个新的bug（或者损害）。如果无视这种损害并且继续开发的话，那么将可能带来一个很危险的问题，最后可能会导致整个系统崩溃，并且没人能够修复。</p>
<h2 id="为什么写单元测试（为什么会拒绝单元测试）"><a href="#为什么写单元测试（为什么会拒绝单元测试）" class="headerlink" title="为什么写单元测试（为什么会拒绝单元测试）"></a>为什么写单元测试（为什么会拒绝单元测试）</h2><h3 id="编写单元测试太花时间了？考虑下面问题："><a href="#编写单元测试太花时间了？考虑下面问题：" class="headerlink" title="编写单元测试太花时间了？考虑下面问题："></a>编写单元测试太花时间了？考虑下面问题：</h3><p>1，对于所编写的代码，你在调试上面画了多少时间？<br>2，对于以前你自认为正确的代码，而实际上这些代码却存在重大的bug，你花了多少时间在重新确认这些代码上面？<br>3，对于一个别人报告的bug，你花了多少时间才找出导致这个bug的源码位置？<br>对于那些没有使用单元测试的程序员而言，上面这些问题所耗费的时间的递增速度是很快的，而且随着项目深入，递增速度会变得更快；而另一方面，适当的单元测试却可以很大程度地减少这些时间，从而为你腾出足够的时间来编写所有的单元测试——甚至可能还有剩余的空闲时间。</p>
<h3 id="运行测试的时间太长？"><a href="#运行测试的时间太长？" class="headerlink" title="运行测试的时间太长？"></a>运行测试的时间太长？</h3><p>一般合适的测试是不会让这种情况发生的。<br>有些真的会花很长时间的，可以把耗时的测试和其他测试分开。</p>
<h3 id="不清楚代码的行为？"><a href="#不清楚代码的行为？" class="headerlink" title="不清楚代码的行为？"></a>不清楚代码的行为？</h3><p>如果实在不清楚代码的行为，那么现在应该也不是应该编码的时候。</p>
<h3 id="代码都能编译通过啊？"><a href="#代码都能编译通过啊？" class="headerlink" title="代码都能编译通过啊？"></a>代码都能编译通过啊？</h3><p>ok，你的代码语法正确，应该也是可以运行的。但是代码的行为和你的预期是一样的么？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public void addItem(Object itemObject)&#123;</span><br><span class="line">    List myList = new List;</span><br><span class="line">    myList.add(itemObject);</span><br><span class="line">    myList.add(itemObject);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>你真的想把同一个对象加到 list 两次么？或许是，或许不是，但是编译器并不能告诉你代码是否完成了你所期望的功能。</p>
<p>下一章<a href="http://localhost:4000/2018/01/26/UT-assert/" target="_blank" rel="noopener">单元测试整理（二）——断言篇，首个单元测试程序</a>将介绍使用断言对代码段进行测试！</p>
</div><div class="tags"></div><div class="post-nav"><a class="next" href="/2018/01/29/UT-mock/">单元测试整理（五）—— Mock篇</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/01/29/UT-what/">单元测试整理（一）——单元测试是什么，有什么好处</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/29/UT-mock/">单元测试整理（五）—— Mock篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/29/UT-content/">单元测试整理（四）——测试哪些内容及边界条件</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/29/UT-constitute/">单元测试整理（三）——JUnit 测试组成和注释</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/29/UT-assert/">单元测试整理（二）——断言篇，首个单元测试程序</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/29/latexdiff/">latexdiff的使用和配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/29/blogCreate/">个人博客搭建教程(hexo+github+maupassant主题)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/wtligit" title="GitHub" target="_blank">GitHub</a><ul></ul><a href="http://blog.csdn.net/potatostyles" title="CSDN" target="_blank">CSDN</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Page of Wentao Li.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>